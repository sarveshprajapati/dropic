(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{22:function(e,t,c){},23:function(e,t,c){},26:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(3),s=c.n(a),r=c(15),i=c.n(r),o=(c(22),c(7)),l=(c(23),c(13)),u=c(10);c(27),c(28);u.a.initializeApp({apiKey:"AIzaSyBoOg_iluqNG4U0chBkW3dA9gWhxF9PyEE",authDomain:"dropic-60094.firebaseapp.com",projectId:"dropic-60094",storageBucket:"dropic-60094.appspot.com",messagingSenderId:"775705320884",appId:"1:775705320884:web:60c572d09cae76afbc26e1"});var j=u.a.storage(),d=u.a.firestore(),b=u.a.firestore.FieldValue.serverTimestamp,p=function(e){var t=Object(a.useState)([]),c=Object(o.a)(t,2),n=c[0],s=c[1];return Object(a.useEffect)((function(){d.collection(e).orderBy("issuedAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id}))})),s(t)}))}),[e]),{docs:n}},f=function(e){var t=e.setSelected,c=p("images").docs;return console.log(c),Object(n.jsx)("div",{className:"img-grid",children:c&&c.map((function(e){return Object(n.jsx)("div",{className:"img-wrap",onClick:function(){return t(e.downloadUrl)},children:Object(n.jsx)("img",{src:e.downloadUrl,alt:"img"})},e.id)}))})},O=function(e){var t=e.selected,c=e.setSelected;return Object(n.jsx)("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&c(null)},children:Object(n.jsx)("img",{src:t,alt:"img"})})},g=function(){return Object(n.jsxs)("div",{className:"title",children:[Object(n.jsx)("h1",{children:"Dropic"}),Object(n.jsx)("form",{action:""})]})},m=c(12),h=c.n(m),x=c(16),v=function(e){var t=Object(a.useState)(0),c=Object(o.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(null),i=Object(o.a)(r,2),l=i[0],u=i[1],p=Object(a.useState)(null),f=Object(o.a)(p,2),O=f[0],g=f[1];return Object(a.useEffect)((function(){var t=j.ref(e.name),c=d.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){return u(e)}),Object(x.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,a=b(),c.add({downloadUrl:n,issuedAt:a}),g(n);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:n,url:O,error:l}},S=function(e){var t=e.file,c=e.setFile,s=v(t),r=s.url,i=s.progress;return console.log(i,r),Object(a.useEffect)((function(){r&&c(null)}),[r,c]),Object(n.jsx)("div",{className:"progress-bar",style:{width:i+"%"}})},w=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),c=t[0],s=t[1],r=Object(a.useState)(null),i=Object(o.a)(r,2),l=i[0],u=i[1],j=["image/jpg","image/png","image/jpeg"];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("form",{className:"upload-form",action:"",children:[Object(n.jsx)("button",{children:"+"}),Object(n.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&j.includes(t.type)?(s(t),u(null)):(s(null),u("Seleted a jpeg/png file !"))}})]}),Object(n.jsxs)("div",{className:"output",children:[l&&Object(n.jsx)("div",{className:"error",children:l}),c&&Object(n.jsx)(S,{file:c,setFile:s})]})]})};var y=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),c=t[0],s=t[1];return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(g,{}),Object(n.jsx)(w,{}),Object(n.jsx)(f,{setSelected:s}),c&&Object(n.jsx)(O,{selected:c,setSelected:s})]})};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.65d32a32.chunk.js.map